# redis并发竞争问题

redis的并发竞争问题，主要是发生在并发写竞争

场景：

考虑到redis没有像db中的sql语句，update val=val+10 where ...无法使用这种方式进行数据的更新。

假如某个key="price",value 为10，现在想把value值进行+10操作。正常逻辑是先把数据key为price的值读回来，加上10，再把值设置回去。
如果只有一个连接的情况，没什么问题，但是如果有2个连接同时想对price+10操作，可能出现问题。

T1时刻，连接1将price读出，目标设置的数据为10+10 = 20。

T2时刻，连接2也将数据读出，也是为10，目标设置为20。

T3时刻，连接1将price设置为20。

T4时刻，连接2也将price设置为20，则最终结果是一个错误值20。






























