# 本地缓存如何保证实时性

缓存系统大多会采用多级缓存的模式，其中本地缓存是非常重要的一环，假如分布式缓存挂了，还可以使用本地缓存，
将DB查询到的结果缓存到本地，避免后续的请求全部到达DB.

那么如何保证本地缓存的实时性？

方案1：引入消息队列。

在数据更新时，发布数据更新的消息。而进程中有相应的消费者消费该消息，更新本地缓存

方案2：设置较短的过期时间，请求时从DB重新拉取

方案3：手动过期

缓存上不设置过期时间，功能上将过期时间存在key对应的value里，如果发现要过期，通过一个后台异步线程进行缓存的构建。
通过后台异步线程，保证有且只有一个线程去查询DB.


每个进程都会本地缓存相同的数据，会不会导致数据浪费？

需要配置本地缓存的过期策略和缓存数量上限。






































